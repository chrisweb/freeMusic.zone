#cloud-config (mongodb)
#freeMusic.zone

# Upgrade the instance on first boot
package_upgrade: true

# add the 10gen repository to /etc/yum.repos.d
yum_repos:
  10gen:
    baseurl: http://downloads-distro.mongodb.org/repo/redhat/os/x86_64
    enabled: true
    failovermethod: priority
    gpgcheck: false
    name: 10gen repository for mongodb
    priority: 20

# install packages
packages:
  - mongo-10gen
  - mongo-10gen-server

# create groups
groups:
  - mongodb-group

# create user
users:
  - default
  - name: mongodb-user
    gecos: MongoDB User
    system: true
    groups: mongodb-group

runcmd:
 # TODO: configure mongodb
 
 # restart mongodb
 [ restart, mongodb ]

final_message: "The mongodb server is finally up, after $UPTIME seconds"

output: {all: '| tee -a /var/log/cloud-init-output.log'}

# vim:syntax=yaml expandtab